CREATE TABLE SEARCH_RESULT(
    RESULT_ID       VARCHAR2(20)                NOT NULL,
    QUERY_ID        VARCHAR2(20)                NOT NULL,
    EMB_REF_ID      VARCHAR2(20)                NOT NULL,
    RESULT_RANK     NUMBER                      NOT NULL,
    CREATED_AT      DATE        DEFAULT SYSDATE NOT NULL,
    SIMILARITY      NUMBER                      NOT NULL,
    
    CONSTRAINT PK_SEARCH_RESULT
        PRIMARY KEY (RESULT_ID),
        
    CONSTRAINT FK_SEARCH_RESULT_QUERY_LOGS
        FOREIGN KEY (QUERY_ID)
        REFERENCES QUERY_LOGS (QUERY_ID)
        ON DELETE CASCADE,
    
    CONSTRAINT FK_SEARCH_RESULT_EMB_REFS
        FOREIGN KEY (EMB_REF_ID)
        REFERENCES EMBEDDING_REFERENCES (EMB_REF_ID),
    
    CONSTRAINT CK_SEARCH_RESULT_RANK
        CHECK (RESULT_RANK >= 1),
    
    CONSTRAINT CK_SEARCH_RESULT_SIMILARITY
        CHECK (SIMILARITY >= 0 AND SIMILARITY <= 1)
);